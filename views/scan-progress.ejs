<!-- Tarama İlerleme Sayfası -->

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card border-0 shadow-sm">
        <div class="card-body p-5 text-center">
          <div class="mb-4">
            <i class="fas fa-shield-virus fa-3x text-primary scanning-icon"></i>
          </div>
          
          <h2 class="mb-4">Tarama Devam Ediyor</h2>
          <p class="mb-4 text-muted">
            Cihazınız şu anda zararlı yazılımlar için taranıyor. Lütfen tarama tamamlanana kadar bekleyin.
          </p>
          
          <div class="progress-wrapper mb-4" id="scanProgress" data-scan-id="<%= scanResult.id %>">
            <div class="progress" style="height: 10px;">
              <div class="progress-bar progress-bar-striped progress-bar-animated bg-primary" 
                   role="progressbar" 
                   style="width: 0%" 
                   aria-valuenow="0" 
                   aria-valuemin="0" 
                   aria-valuemax="100">0%</div>
            </div>
            <div class="scan-status mt-2 text-muted">Tarama başlatılıyor...</div>
          </div>
          
          <div class="d-flex flex-column">
            <div class="d-flex justify-content-between mb-2">
              <span class="text-muted">Tarama Tipi:</span>
              <span class="fw-medium">
                <% if (scanResult.type === 'QUICK') { %>
                  <span class="badge bg-primary">Hızlı Tarama</span>
                <% } else if (scanResult.type === 'FULL') { %>
                  <span class="badge bg-success">Tam Tarama</span>
                <% } else if (scanResult.type === 'WIFI') { %>
                  <span class="badge bg-info">Wi-Fi Tarama</span>
                <% } else if (scanResult.type === 'QR') { %>
                  <span class="badge bg-warning">QR Kod Tarama</span>
                <% } else { %>
                  <span class="badge bg-secondary"><%= scanResult.type %></span>
                <% } %>
              </span>
            </div>
            
            <div class="d-flex justify-content-between mb-2">
              <span class="text-muted">Başlangıç Zamanı:</span>
              <span class="fw-medium">
                <%= new Date(scanResult.startTime).toLocaleString('tr-TR') %>
              </span>
            </div>
            
            <div class="d-flex justify-content-between">
              <span class="text-muted">Tarama ID:</span>
              <span class="text-muted small"><%= scanResult.id %></span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="text-center mt-4">
        <a href="/" class="btn btn-outline-secondary">
          <i class="fas fa-home me-2"></i> Ana Sayfaya Dön
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  // Progress çubuğunu 0'dan başlat
  const progressBar = document.querySelector('.progress-bar');
  progressBar.style.width = '0%';
  progressBar.setAttribute('aria-valuenow', 0);
  progressBar.textContent = '0%';
</script>